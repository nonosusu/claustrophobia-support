<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å‘¼å¸æ³•ãƒ»å®‰å¿ƒã‚¬ã‚¤ãƒ‰</title>
  <style>
    body {
      font-family: "Yu Gothic", sans-serif;
      background-color: #f0faff;
      padding: 40px;
      text-align: center;
      line-height: 1.8;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 28px;
    }
    .section {
      margin: 40px auto;
      max-width: 700px;
      background: #ffffff;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      text-align: left;
    }
    .section h2 {
      font-size: 22px;
      color: #0077aa;
      margin-bottom: 10px;
    }
    .section p, .section ul {
      font-size: 18px;
      margin-bottom: 10px;
    }
    button {
      margin-top: 10px;
      padding: 10px 24px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #4ca7db;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #357abd;
    }
    #homeBtn, #langToggle {
      position: fixed;
      top: 10px;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 8px;
      z-index: 100;
    }
    #homeBtn {
      left: 10px;
    }
    #langToggle {
      right: 10px;
    }
    #breathingGuide {
      font-size: 20px;
      margin-top: 15px;
      color: #333;
      font-weight: bold;
      text-align: center;
      min-height: 40px;
    }
    #circle {
      margin: 20px auto;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background-color: #4ca7db;
      opacity: 0.6;
      transition: width 4s ease-in-out, height 4s ease-in-out, opacity 4s ease-in-out;
    }
  </style>
</head>
<body>

  <button id="homeBtn" onclick="location.href='index.html'">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
  <button id="langToggle" onclick="toggleLanguage()">ğŸŒ English</button>

  <h1 id="mainTitle">å‘¼å¸æ³•ãƒ»å®‰å¿ƒã‚¬ã‚¤ãƒ‰</h1>

  <div class="section">
    <h2>å‘¼å¸æ³•ã®ç´¹ä»‹</h2>
    <p id="introText">ã‚†ã£ãã‚Šå‘¼å¸ã‚’æ•´ãˆã¦æ°—æŒã¡ã‚’è½ã¡ç€ã‘ã‚‹ãŸã‚ã«ã€4ç§’å¸ã£ã¦ã€4ç§’æ­¢ã‚ã¦ã€4ç§’åã„ã¦ã€4ç§’æ­¢ã‚ã‚‹ã€Œãƒœãƒƒã‚¯ã‚¹å‘¼å¸ã€ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
    <div id="breathingGuide">æº–å‚™ãŒã§ããŸã‚‰ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„</div>
    <div id="circle"></div>
    <button id="startBtn" onclick="startBreathingGuide()">â–¶ å‘¼å¸ã‚¬ã‚¤ãƒ‰ã‚’é–‹å§‹</button>
  </div>

  <div class="section">
    <h2>è½ã¡ç€ãå§¿å‹¢ã®ãƒã‚¤ãƒ³ãƒˆ</h2>
    <ul id="postureList">
      <li>èƒŒç­‹ã‚’ä¼¸ã°ã—ã€æ¥½ãªå§¿å‹¢ã§åº§ã‚‹ã‹æ¨ªã«ãªã‚‹</li>
      <li>è‚©ã®åŠ›ã‚’æŠœã„ã¦ãƒªãƒ©ãƒƒã‚¯ã‚¹ã™ã‚‹</li>
      <li>ç›®ã‚’é–‰ã˜ã‚‹ã‹ã€è¦–ç·šã‚’æŸ”ã‚‰ã‹ãé ãã«å‘ã‘ã‚‹</li>
      <li>æ·±å‘¼å¸ã¨åˆã‚ã›ã¦ã‚†ã£ãŸã‚Šéã”ã™</li>
    </ul>
  </div>

  <script>
    let currentLang = 'ja';

    const messages = {
      ja: {
        mainTitle: 'å‘¼å¸æ³•ãƒ»å®‰å¿ƒã‚¬ã‚¤ãƒ‰',
        introText: 'ã‚†ã£ãã‚Šå‘¼å¸ã‚’æ•´ãˆã¦æ°—æŒã¡ã‚’è½ã¡ç€ã‘ã‚‹ãŸã‚ã«ã€4ç§’å¸ã£ã¦ã€4ç§’æ­¢ã‚ã¦ã€4ç§’åã„ã¦ã€4ç§’æ­¢ã‚ã‚‹ã€Œãƒœãƒƒã‚¯ã‚¹å‘¼å¸ã€ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚',
        breathingReady: 'æº–å‚™ãŒã§ããŸã‚‰ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„',
        breathingSteps: ['4ç§’å¸ã£ã¦â€¦', 'æ­¢ã‚ã¦â€¦', '4ç§’åã„ã¦â€¦', 'æ­¢ã‚ã¦â€¦'],
        breathingStartMsg: 'æ·±å‘¼å¸ã‚’ã¯ã˜ã‚ã¾ã—ã‚‡ã†â€¦',
        breathingDone: 'ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚ã‚†ã£ãã‚Šã—ã¦ã„ã¦ãã ã•ã„ã€‚',
        postureList: [
          'èƒŒç­‹ã‚’ä¼¸ã°ã—ã€æ¥½ãªå§¿å‹¢ã§åº§ã‚‹ã‹æ¨ªã«ãªã‚‹',
          'è‚©ã®åŠ›ã‚’æŠœã„ã¦ãƒªãƒ©ãƒƒã‚¯ã‚¹ã™ã‚‹',
          'ç›®ã‚’é–‰ã˜ã‚‹ã‹ã€è¦–ç·šã‚’æŸ”ã‚‰ã‹ãé ãã«å‘ã‘ã‚‹',
          'æ·±å‘¼å¸ã¨åˆã‚ã›ã¦ã‚†ã£ãŸã‚Šéã”ã™'
        ],
        langButton: 'ğŸŒ English',
        homeButton: 'ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹',
      },
      en: {
        mainTitle: 'Breathing & Calm Guide',
        introText: 'Try the â€œBox Breathingâ€: breathe in for 4 seconds, hold for 4 seconds, breathe out for 4 seconds, then hold for 4 seconds to help calm your mind.',
        breathingReady: 'Press the button below when you are ready',
        breathingSteps: ['Breathe in for 4 seconds...', 'Hold...', 'Breathe out for 4 seconds...', 'Hold...'],
        breathingStartMsg: "Let's start deep breathing...",
        breathingDone: 'Good job! Take your time and relax.',
        postureList: [
          'Sit or lie down comfortably with your back straight',
          'Relax your shoulders',
          'Close your eyes or gaze softly into the distance',
          'Combine with deep breaths and relax'
        ],
        langButton: 'ğŸŒ æ—¥æœ¬èª',
        homeButton: 'ğŸ  Back to Home',
      }
    };

    function toggleLanguage() {
      currentLang = currentLang === 'ja' ? 'en' : 'ja';
      const lang = messages[currentLang];

      document.getElementById('mainTitle').innerText = lang.mainTitle;
      document.getElementById('introText').innerText = lang.introText;
      document.getElementById('breathingGuide').innerText = lang.breathingReady;
      document.getElementById('startBtn').innerText = 'â–¶ ' + (currentLang === 'ja' ? 'å‘¼å¸ã‚¬ã‚¤ãƒ‰ã‚’é–‹å§‹' : 'Start Breathing Guide');

      const ul = document.getElementById('postureList');
      ul.innerHTML = '';
      lang.postureList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        ul.appendChild(li);
      });

      document.getElementById('langToggle').innerText = lang.langButton;
      document.getElementById('homeBtn').innerText = lang.homeButton;
    }

    function speak(text) {
      speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = currentLang === 'ja' ? 'ja-JP' : 'en-US';
      utterance.rate = 0.9;       // å°‘ã—ã‚†ã£ãã‚Šã‚
      utterance.pitch = 1.0;      // æ¨™æº–
      utterance.volume = 1.0;     // éŸ³é‡ã¯æœ€å¤§
      const voices = speechSynthesis.getVoices();
      if (voices.length) {
        const preferred = voices.find(v => v.lang === utterance.lang && (v.name.includes("Google") || v.name.includes("Microsoft") || v.name.includes("Samantha")));
        if (preferred) utterance.voice = preferred;
      }
      speechSynthesis.speak(utterance);
    }

    // å‘¼å¸ã‚¬ã‚¤ãƒ‰ï¼†éŸ³å£°ï¼†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    function startBreathingGuide() {
      const guide = document.getElementById('breathingGuide');
      const circle = document.getElementById('circle');
      const steps = messages[currentLang].breathingSteps;
      let count = 0;
      guide.innerText = messages[currentLang].breathingStartMsg;
      speak(guide.innerText);
      document.getElementById('startBtn').disabled = true;

      const interval = setInterval(() => {
        const stepText = steps[count % steps.length];
        guide.innerText = stepText;
        speak(stepText);

        if (count % steps.length === 0) {
          circle.style.width = '150px';
          circle.style.height = '150px';
          circle.style.opacity = '0.9';
        } else if (count % steps.length === 2) {
          circle.style.width = '90px';
          circle.style.height = '90px';
          circle.style.opacity = '0.6';
        }

        count++;
        if (count > 12) {
          clearInterval(interval);
          guide.innerText = messages[currentLang].breathingDone;
          speak(guide.innerText);
          document.getElementById('startBtn').disabled = false;
          circle.style.width = '120px';
          circle.style.height = '120px';
          circle.style.opacity = '0.6';
        }
      }, 4000);
    }

    window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>
